---
import { getMovieDetails } from "@data/tmdb.new";
import type { MovieFormData, Movie } from "src/actions/movie";
import MoviePage from "src/components/MoviePage.astro";

export const prerender = false;
const url = new URL(Astro.request.url);
const id = url.searchParams.get("id");

const formData: MovieFormData = {
	prompt: "",
	good: true,
	decade: 0,
	genres: [],
	providers: [],
};

let movie: Movie | null = null;
if (id) {
	movie = await getMovieDetails(id);
}
---

<MoviePage movie={movie} formData={formData} />
